FROM alpine:latest

RUN mkdir -p /app
RUN mkdir -p /app/data
RUN mkdir -p /app/config

WORKDIR /app
COPY supervisor /app
COPY supervisor.settings.json /app/config

ARG HTTP_ALLOWED_ORIGIN=*
ARG HTTP_ENABLE_GRAPHIQL=true
ARG AUTHENTICATION_HASH_COST=16
ARG AUTHENTICATION_TOKEN_SIZE=128
ARG AUTHENTICATION_SESSION_DURATION=12
ARG LOGGER_MODE=info
ARG LOGGER_SYNC_ACTIVE=true
ARG LOGGER_LOG_RETENTION=168
ARG LOGGER_CHECK_INTERVAL=6

EXPOSE 3030

CMD ["./supervisor"]